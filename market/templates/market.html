{% extends 'base.html'%}


{% block title %}
Market Page
{% endblock %}

{% block content %}

<div class="row" style="margin-top:-20px; margin-left:20px">

    <div class="col-6">
        <br>
        <h2>Available items in market</h2>
        <p>Click here to purchase the items</p>
        <table class="table table-hover table-dark">
            <thead>
            <tr>
                <!-- Your Columns HERE -->
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">BarCode</th>
                <th scope="col">Price</th>
                <th scope="col">Options</th>
            </tr>
            </thead>
            <tbody>
            <!-- Your rows inside the table HERE: -->
            {% for item in items %}
            <!-- More info button on market page will be handled
              by below statement. We will include the modal in
              for loop as it needs to be unique to all the
              items. For displaying the dynamic data, we look for
              the modal id like id="exampleModal-{{ item.id }}"
              prefix with hash
              -->
            {% include 'includes/items_modals.html' %}
            <tr>
                <td>{{item['id']}}</td>
                <td>{{item.name}}</td>
                <td>{{item.barcode}}</td>
                <td>{{item.price}}$</td>
                <td>
                    <button class="btn btn-outline btn-info mx-1" data-toggle="modal"
                            data-target="#infoModal-{{ item.id }}"> More Info
                    </button>
                    <button class="btn btn-outline btn-success" mx-1 data-toggle="modal"
                            data-target="#purchaseModal-{{ item.id }}"> Purchase this Item
                    </button>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>


    </div>
    <div class="col-4">
        <br>
        <h2>Owned Items</h2>
        <p>Click here to start selling the items</p>
        <br>
        <div class="row">
            {% for owned_item in owned_items %}
            {% include 'includes/owned_items_modals.html' %}
            <div class="col-md-6">
                <div style="margin-bottom: 5px" class="card text-center bg-dark">
                    <div class="card-body">
                        <h5 class="card-title">{{ owned_item.name }}</h5>
                        <button type="button" class="btn btn-outline-danger" style="margin-bottom: 5px"
                                data-toggle="modal" data-target="#sellingModal-{{ owned_item.id }}">
                            Sell this Item
                        </button>
                        <p class="card-text"><strong>
                            This item costs {{ owned_item.price }}$
                        </strong></p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
</div>


{% endblock %}